<!DOCTYPE html>
<html>
<head>
<title>AR.js A-Frame Location-based</title>
<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
<script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js'></script>
<script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js'></script>
<script src="https://rawgit.com/nicolocarpignoli/nicolocarpignoli.github.io/master/ar-click-events/events.js"></script>
</head>
<body>
<a-scene cursor = 'rayOrigin: mouse' vr-mode-ui='enabled: false' arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false' renderer='antialias: true; alpha: true'>
    <a-camera gps-new-camera='gpsMinDistance: 5'></a-camera>
    <!-- <a-entity raycaster="objects: .clickable" cursor></a-entity> -->
    <!-- <a-entity class="clickable" geometry="primitive: box" position="1 0 0"></a-entity>
    <a-entity class="not-clickable" geometry="primitive: sphere" position="-1 0 0"></a-entity> -->
    <!-- <a-entity camera look-controls>
        <a-entity cursor="fuse: true; fuseTimeout: 500"
                  position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                  material="color: blue; shader: flat">
        </a-entity>
    </a-entity> -->

      <!-- <a-entity id="box" cursor-listener geometry="primitive: box" material="color: white"></a-entity> -->
    <!-- <a-entity material='color: red' geometry='primitive: box' gps-new-entity-place="latitude: <your-lat>; longitude: <your-loon>" scale="10 10 10"></a-entity> -->
    <script>
                  window.onload = function () {
                    const routeData = JSON.parse(localStorage.getItem('routeData'));
                    console.log('Start Location:', routeData.startLocation);
                    console.log('End Location:', routeData.endLocation);

                    // Loop through each detailed route detail and create boxes for intersections
                    routeData.detailedRouteDetails.forEach((step, index) => {
                      step.intersections.forEach((intersection, i) => {
                        // Create <a-box> element
                        const box = document.createElement('a-box');

                        // Set box attributes
                        box.setAttribute('color', 'green');
                        box.setAttribute('scale', '2 2 2');

                        // Set position using GPS coordinates
                        box.setAttribute('gps-entity-place', `latitude: ${intersection.location[1]}; longitude: ${intersection.location[0]}`);

                        // Append the box to the scene
                        document.querySelector('a-scene').appendChild(box);
                      });
                    });
                  };
      </script>
</a-scene>
<script src = "script.js"></script>
<!-- <script>
window.onload = function () {
    const routeData = JSON.parse(localStorage.getItem('routeData'));
    console.log('Start Location:', routeData.startLocation);
    console.log('End Location:', routeData.endLocation);

    // Loop through each detailed route detail and log intersection coordinates
    routeData.detailedRouteDetails.forEach((step, index) => {
      console.log(`Intersection ${index + 1}:`);
      step.intersections.forEach((intersection, i) => {
        console.log(`  Latitude ${i + 1}: ${intersection.location[1]}`);
        console.log(`  Longitude ${i + 1}: ${intersection.location[0]}`);
      });
    });
  };
</script> -->
</body>
</html>
