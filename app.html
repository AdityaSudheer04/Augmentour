<!DOCTYPE html>
<html>
<head>
<title>AR.js A-Frame Location-based</title>
<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
<script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js'></script>
<script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js'></script>
<script src="https://rawgit.com/nicolocarpignoli/nicolocarpignoli.github.io/master/ar-click-events/events.js"></script>
<script type='text/javascript' src='/aframe-ar-nft.js'></script>
</head>
<body>
  <a-scene
        vr-mode-ui="enabled: false"
        arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false;'
        renderer='antialias: true; alpha: true'>
            <a-camera gps-camera rotation-reader></a-camera>
    <script>
                  window.onload = function () {
                    const routeData = JSON.parse(localStorage.getItem('routeData'));
                    console.log('Start Location:', routeData.startLocation);
                    console.log('End Location:', routeData.endLocation);

                    // Loop through each detailed route detail and create boxes for intersections
                    routeData.detailedRouteDetails.forEach((step, index) => {
                      step.intersections.forEach((intersection, i) => {
                        // Create <a-box> element
                        const box = document.createElement('a-box');

                        // Set box attributes
                        box.setAttribute('color', 'red');
                        box.setAttribute('scale', '50 50 50');

                        // Set position using GPS coordinates
                        box.setAttribute('gps-entity-place', `latitude: ${intersection.location[1]}; longitude: ${intersection.location[0]}`);

                        // Append the box to the scene
                        document.querySelector('a-scene').appendChild(box);
                      });
                    });
                  };
      </script>
</a-scene>
<script src = "script.js"></script>
</body>
</html>
